# W4

## 步驟

1.  先到 [RainbowKit](https://www.rainbowkit.com/docs/installation) 的官方網站，使用官方提供的指令快速架起新專案，

```
npm init @rainbow-me/rainbowkit@latest
# or
pnpm create @rainbow-me/rainbowkit@latest
# or
yarn create @rainbow-me/rainbowkit
```

如果要手動把 RainbowKit 配置進原有專案，可以用下面指令

```
npm install @rainbow-me/rainbowkit wagmi viem
```

2.  如果是用官方提供的指令建新專案，預設開啟後的新專案已經串接好錢包。

3.  接下來要開始進行 opensea 的串接，先到 opensea 找尋要串接的合約。(找使用 erc 721 發行的 nft)

4.  點進去 opensea 的 details ，尋找合約的 abi 接口

5.  在專案裡做一個新的 json 檔，把要串接的 abi 加進去，使用下面的格式

```json
{
  "address": "放要串接的合約地址",
  "abi": "放要串接的 abi "
}
```

6.  接下來開始使用 wagmi 提供的 hooks 進行合約的串接

7.  撰寫的程式碼如下，有加入適當註解

```tsx
import { ConnectButton } from '@rainbow-me/rainbowkit';
import type { NextPage } from 'next';
import Head from 'next/head';
import styles from '../styles/Home.module.css';
import { useContractRead } from 'wagmi';
import useMounted from './hooks/useMounted';
import NFTabi from '../pages/abi/basic.json'; // 把 abi 引入

const Home: NextPage = () => {
  const mounted = useMounted(); // 用來解決 Hydration 的問題
  const add = NFTabi.address as `0x${string}`;

  const { data, isError, isLoading } = useContractRead({
    address: add,
    abi: NFTabi.abi,
    functionName: 'balanceOf', // abi 提供的方法
    args: ['0x50aB4FD724a490A768A448803cde142375621647'], // 放要確認的數量地址
  });

  return (
    <div className={styles.container}>
      <Head>
        <title>RainbowKit App</title>
        <meta
          content='Generated by @rainbow-me/create-rainbowkit'
          name='description'
        />
        <link href='/favicon.ico' rel='icon' />
      </Head>

      <main className={styles.main}>
        <ConnectButton />

        <h1 className={styles.title}>
          Welcome to <a href=''>RainbowKit</a> + <a href=''>wagmi</a> +{' '}
          <a href='https://nextjs.org'>Next.js!</a>
        </h1>

        <p className={styles.description}>
          Get started by editing{' '}
          <code className={styles.code}>pages/index.tsx</code>
        </p>
        <div>balanceOf: {mounted ? Number(data) : null}</div>
        {/* 
        1. 顯示該地址有多少該合約的 NFT 。
        2. 透過加上 mounted 來避免發生  Hydration 的問題*/}
      </main>
    </div>
  );
};

export default Home;
```
